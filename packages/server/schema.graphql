schema {
  query: Query
  mutation: RootMutation
}

# A blog post or article
type Article {
  # Unique identifier for the object.
  id: ID!

  # The title of the article
  title: String!
  cached: Int

  # An alphanumeric identifier for the object unique to its type.
  slug: String

  # html content of the article
  content: String

  # Raw JSON of the article
  rawContent: JSON

  # Short description of the article
  excerpt: String

  # True if the article is featured
  featured: Boolean

  # True if the article is published
  published: Boolean

  # url of the article feature image
  image: String

  # url of the article hero image
  heroImage: String

  # True if the article is published
  userId: ID

  # The category id
  categoryId: ID

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime

  # Tags relating articles together
  tags: [Tag]

  # Media uploaded with the article
  media: [Media]

  # Users belonging to a role.
  author: User

  # Category the article belongs to.
  category: Category
}

# A category groups content together
type Category {
  # Unique identifier for the object.
  id: ID!

  # A name for the object.
  name: String

  # An alphanumeric identifier for the object unique to its type.
  slug: String

  # An icon to use for the category
  icon: String

  # A description of the category
  description: String

  # Entities belonging to the category
  entities: [Entity]

  # Articles belonging to the category
  articles: [Article]

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

# Variations of status for content
enum CONTENT_STATUS {
  PUBLISHED
  ARCHIVED
  DRAFT
}

# A tag relates content together
type ContentType {
  # Unique identifier for the object.
  id: ID!

  # A name for the object.
  name: String

  # An alphanumeric identifier for the object unique to its type.
  slug: String

  # An icon to use for the content type
  icon: String

  # A description of the tag
  description: String

  # Articles related to the tag
  entities: [Article]

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

input CreateArticleInput {
  # The title of the article
  title: String!

  # The slug / normalized article title.
  slug: String

  # html content of the article
  content: String

  # Raw JSON of the article
  rawContent: JSON

  # Short description of the article
  excerpt: String

  # True if the article is featured
  featured: Boolean

  # True if the article is published
  published: Boolean!

  # url of the article feature image
  image: String

  # url of the article background image
  heroImage: String

  # Tags relating articles together
  tags: [String]

  # Id of the category
  categoryId: ID
}

input CreateCategoryInput {
  # A name for the object.
  name: String

  # An alphanumeric identifier for the object unique to its type.
  slug: String

  # An icon to use for the category
  icon: String

  # A description of the category
  description: String
}

input CreateContentTypeInput {
  # A name for the object.
  name: String

  # An alphanumeric identifier for the object unique to its type.
  slug: String

  # An icon to use for the content type
  icon: String

  # A description of the content type
  description: String
}

# The DateTime scalar type represents date time strings complying to ISO-8601.
scalar DateTime

input EditArticleInput {
  # The title of the article
  title: String!

  # The slug / normalized article title.
  slug: String!

  # html content of the article
  content: String

  # Raw JSON of the article
  rawContent: JSON

  # Short description of the article
  excerpt: String!

  # True if the article is featured
  featured: Boolean

  # True if the article is published
  published: Boolean!

  # url of the article feature image
  image: URL

  # url of the article hero image
  heroImage: URL

  # Id of the category
  categoryId: ID
}

input EditDetailInput {
  # The id
  id: ID

  # The title text for the menu link
  title: String

  # Lowercase, normalized, name
  safeName: String

  # Custom css classname for the link
  cssClassname: String

  # True if the item has a dropdown
  hasDropdown: Boolean

  # The display order
  order: Int

  # Mobile only link
  mobileHref: String

  # The link
  href: String

  # Icon kind
  icon: String

  # Children are dropdown links
  children: JSON
}

input EditMediaInput {
  # The file name
  name: String!

  # A description of the file
  fileDescription: String
}

input EditUserInput {
  # The email address of the account to login to.
  email: Email

  # Where the user is from.
  location: String

  # Information about the user.
  bio: String

  # The username for the new user
  username: String

  # The first name of the user.
  firstName: String

  # The last name of the user.
  lastName: String
}

# The Email scalar type represents E-Mail addresses compliant to RFC 822.
scalar Email

# A content item
type Entity {
  # Unique identifier for the object.
  id: ID!

  # The title of the entity
  title: String!

  # An alphanumeric identifier for the object unique to its type.
  slug: String

  # html content of the entity
  content: String

  # Raw JSON of the entity
  rawContent: JSON

  # Short description of the entity
  excerpt: String
  meta: JSON

  # The publish status of content
  status: CONTENT_STATUS

  # url of the entity main image
  image: String

  # The id of the creator
  userId: ID

  # The content type id
  ctId: ID

  # The category id
  categoryId: ID

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime

  # Tags relating articles together
  tags: [Tag]
  contentType: ContentType
  category: Category

  # User who created the entity.
  author: User
}

type Error {
  # HTTP status code
  code: Int

  # The error message
  message: String
}

type File {
  # Unique identifier for the object.
  id: ID!

  # A name for the object.
  name: String

  # The type of file.
  type: String!

  # The size of the file
  size: Int!

  # The path to the file.
  path: String!

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

# The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
scalar JSON

# Uploaded images, videos or audio
type Media {
  # Unique identifier for the object.
  id: ID!

  # A name for the object.
  name: String

  # A normalized copy of the object name.
  safeName: String

  # thumbnail filename
  thumbName: String

  # The description of the upload
  fileDescription: String

  # The mime-type of the upload
  type: String

  # The size of the upload
  size: Int

  # The local path where the file is stored
  path: String

  # The relative url to access the file
  url: String

  # The id of the user the file belongs to.
  userId: ID

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

# Navigation for the site
type Menu {
  # Unique identifier for the object.
  id: ID!

  # A UUID (Universal Unique Identifier) is a 128-bit number used to uniquely identify some object or entity.
  uuid: UUID

  # A name for the object.
  name: String

  # Custom css classname for the link
  attributes: String

  # True if the menu should be hidden from unauth
  restricted: Boolean

  # Links
  details: [MenuDetail]

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

# links and other menu content
type MenuDetail {
  # Unique identifier for the object.
  id: ID!

  # The title text for the menu link
  title: String

  # A normalized copy of the object name.
  safeName: String

  # Custom css classname for the link
  cssClassname: String

  # True if the item has a dropdown
  hasDropdown: Boolean

  # The display order
  order: Int

  # Mobile only link
  mobileHref: String

  # The link
  href: String

  # Icon kind
  icon: String

  # Children are dropdown links
  children: JSON

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

# Page of the website
type Page {
  # Unique identifier for the object.
  id: ID!

  # The title of the page
  title: String!

  # An alphanumeric identifier for the object unique to its type.
  slug: String

  # A URL to access the page
  url: String

  # Page meta data
  meta: JSON

  # Page content blocks
  blocks: JSON

  # Page html markup
  markup: String

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

type Query {
  # Returns all articles from the database..
  articles(
    # The number of articles to offset
    offset: Int

    # The maximum number of articles to return at a time.
    limit: Int
  ): [Article]

  # Return all articles matching the given tag.
  getArticlesForTag(name: String, offset: Int, limit: Int): [Article]

  # Return a specific article using its slug
  getArticleBySlug(slug: String): Article

  # A query for a listing of all categories
  categories: [Category]

  # A query for a single category
  category(
    # The id of the requested category
    id: ID!
  ): Category

  # A query for a listing of all content types
  contentTypes: [ContentType]

  # A query for a single content type
  contentType(
    # The id of the requested content type
    id: ID!
  ): ContentType

  # Returns all content entities from the database..
  entities(
    # The number of entities to offset
    offset: Int

    # The maximum number of entities to return at a time.
    limit: Int
  ): [Entity]

  # A query for a listing of all attachments
  files(
    # The number of attachments to offset
    offset: Int!

    # The maximum number of attachments to return at a time.
    limit: Int!
  ): [File]

  # A query for a listing of all media
  getMedia(
    # The number of media to offset
    offset: Int

    # The maximum number of media to return at a time.
    limit: Int
  ): [Media]

  # A query for a returning a single media by its id
  getMediaById(
    # The id of the requested media
    id: ID!
  ): Media

  # A query for a specific menu
  getMenuById(id: ID!): Menu

  # A query returning all links
  details: [MenuDetail]

  # A query for a listing of all pages
  pages: [Page]

  # A query for a single page
  singlePage(slug: String): Page

  # A query for a listing of all roles
  getRoles: [Role]

  # A query for a listing of all settings
  settings: [Setting]

  # A query for a listing of all tags
  getTags(
    # The number of tags to offset
    offset: Int!

    # The maximum number of tags to return at a time.
    limit: Int!
  ): [Tag]

  # A query for a listing of all users
  getUsers(
    # The number of users to offset
    offset: Int

    # The maximum number of users to return at a time.
    limit: Int
  ): [User]

  # A query for admin to find a user by their id
  getUserByUserId(
    # The user ID for the desired user
    userId: ID!
  ): User

  # A query to retrieve a user by their username
  getUserByUsername(
    # The username for the desired user
    username: String!
  ): User

  # Given an auth token, return the user and auth token
  me: User

  # Given an auth token, return the user and auth token
  getCurrentUser: User
}

# Reset password token.
type ResetToken {
  # Unique identifier for the object.
  id: ID!

  # The ip address of the person performing the reset
  ip: String

  # The reset token
  token: String

  # True if the token has been used before.
  used: Boolean

  # The IP address of the blocked user
  userId: ID

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

# Role or permission group for users
type Role {
  # Unique identifier for the object.
  id: ID!

  # A UUID (Universal Unique Identifier) is a 128-bit number used to uniquely identify some object or entity.
  uuid: UUID

  # A name for the object.
  name: String

  # An image for role identification
  image: URL

  # The role description
  description: String

  # Users belonging to a role.
  users: [User]

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

type RootMutation {
  # Adds a new article to the database.
  createArticle(input: CreateArticleInput!): Article

  # Edit an existing article
  editArticle(
    # The article ID
    id: ID!

    # The required fields for creating an article.
    input: EditArticleInput!
  ): Article

  # Remove an article from the database
  deleteArticle(
    # The article ID
    id: ID!
  ): Boolean

  # Adds a new category to the database.
  createCategory(input: CreateCategoryInput!): Category

  # Adds a new content type to the database.
  createContentType(input: CreateContentTypeInput!): ContentType

  # Upload a new media file and store in the database.
  singleUpload(
    # The file to upload
    file: Upload!
  ): File

  # Upload a new media file and store in the database.
  multipleUpload(
    # The file to upload
    files: [Upload]
  ): [File]

  # Upload a new media file and store in the database.
  uploadMedia(
    # The file to upload
    file: UploadMediaInput!
  ): File

  # Edit an existing media file
  editMedia(
    # The media ID
    id: ID!

    # The required fields for editing a media file.
    input: EditMediaInput!
  ): Media

  # Remove a media file from the server
  deleteMedia(
    # The media ID
    id: ID!
  ): Boolean

  # Edit menu details
  editDetails(
    # The detail ID
    id: ID!

    # The required fields for editing a detail.
    input: EditDetailInput!
  ): MenuDetail

  # creating a new tag
  editSetting(id: ID!, input: SettingInput!): Setting

  # creating a new tag
  addTag(input: TagInput!): Tag

  # Edit an existing tag
  editTag(
    # The tag ID
    id: ID!

    # The fields (name, description) for editing a tag.
    input: TagInput!
  ): Tag

  # Remove a tag from the database
  deleteTag(
    # The tag ID
    id: ID!
  ): Tag

  # for troubleshooting by admins, create a JWT for a given userId
  loginUser(input: UserLoginInput!): UserLoginResponse

  # A user registering for an account.
  signupUser(input: UserSignupInput!): User

  # Edit an existing user
  editUser(
    # The user ID
    id: ID!

    # The required fields for editing a user.
    input: EditUserInput!
  ): User
}

# Editable site settings
type Setting {
  # Unique identifier for the object.
  id: ID!

  # The setting option
  key: String

  # The value of the setting
  value: String

  # A non-normalized key
  label: URL

  # The description for what the setting does.
  description: String
}

input SettingInput {
  # The setting option
  key: String

  # The value of the setting
  value: String

  # A non-normalized key
  label: String

  # The description for what the setting does.
  description: String
}

type Social {
  # Unique identifier for the object.
  id: ID!

  # The unique identifier for the user for the identity.
  userId: ID!

  # The Facebook profile url for the user.
  facebookUrl: URL

  # The Twitter profile url for the user.
  twitterUrl: URL

  # The Google profile url for the user.
  googleUrl: URL

  # The GitHub profile url for the user.
  githubUrl: URL

  # The LinkedIn profile url for the user.
  linkedinUrl: URL

  # The Stackoverflow profile url for the user.
  stackoverflowUrl: URL
}

# A tag relates content together
type Tag {
  # Unique identifier for the object.
  id: ID!

  # A name for the object.
  name: String

  # A description of the tag
  description: String

  # Articles related to the tag
  articles: [Article]

  # Entities related to the tag
  entities: [Entity]

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}

input TagInput {
  # The name of the tag
  name: String!

  # A description of the tag.
  description: String
}

input Upload {
  # The file name
  name: String!

  # The type of file.
  type: String!

  # The size of the file
  size: Int!

  # The path to the file.
  path: String!
}

input UploadMediaInput {
  # The file name
  name: String!

  # The type of file.
  type: String!

  # The size of the file
  size: Int!

  # The path to the file.
  path: String!
}

# The URL scalar type represents URL addresses.
scalar URL

# The user or account
type User {
  # Unique identifier for the object.
  id: ID!

  # The timestamp when the object was deleted
  deletedAt: DateTime

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime

  # The user email
  email: Email!

  # The username of the user
  username: String

  # true if email is verified, false otherwise
  verified: Boolean

  # The website of the user
  website: URL

  # The first name of the user
  firstName: String

  # The last name associated with the user
  lastName: String

  # Information about the user
  bio: String

  # url of user's avatar picture
  avatarUrl: URL

  # Url for the user's profile background image
  profileImage: URL

  # Location the user lives
  location: String

  # Language the user prefers
  language: String

  # When the user was born
  birthday: DateTime

  # When the user last logged in.
  lastLogin: DateTime

  # Roles the user belongs to.
  roles: [Role]

  # Social media profiles of the user.
  socialMedia: Social

  # Articles the user has written
  articles: [Article]

  # Articles the user has written
  uploads: [Media]

  # Account verification token belonging to the user.
  verificationToken: VerificationToken

  # Password reset token belonging to the user.
  resetToken: ResetToken
}

input UserLoginInput {
  # The email address of the account to login to.
  email: Email!

  # The password belonging to the account.
  password: String!
}

type UserLoginResponse {
  # The JSONWebToken for the user.
  token: String

  # The user who logged in.
  user: User

  # Any auth related errors.
  errors: [Error]
}

input UserSignupInput {
  # The email address of the account to login to.
  email: Email!

  # The password belonging to the account.
  password: String!

  # The username for the new user
  username: String!

  # The first name of the user.
  firstName: String!

  # The last name of the user.
  lastName: String!
}

# The UUID scalar type represents a UUID.
scalar UUID

# Account verification token for a user
type VerificationToken {
  # Unique identifier for the object.
  id: ID!

  # The ip address of the person performing the reset
  ip: String

  # The reset token
  token: String

  # True if the token has been used before.
  used: Boolean

  # The IP address of the blocked user
  userId: ID

  # The timestamp when the object was last updated
  updatedAt: DateTime

  # The timestamp when the object was created
  createdAt: DateTime
}
